# 角色扮演生存小游戏

## 游戏概述
基于网页运行的角色扮演生存类游戏。玩家通过虚拟摇杆操控扮演一名冒险家。在程序生成的无尽世界中探索，收集，战斗，成长

## 核心玩法

### 角色系统
- **角色移动**：角色移动具有速度和惯性，外部对角色的操作只能给角色施加加速度，而不能直接改变速度
- **角色移动**：角色死亡时有一个过程，会闪烁1.5秒，并被击飞

### 主角-以角色系统为基础
- **概述**：玩家角色由两个几何形状分别绘制身体和头部，再加上马头的图片，结合角色状态要能表现出向左待机，向右待机，向左移动，向右移动四种状态，几何体与马的运动表现风格类似忍者奔跑。

### npc-以角色系统为基础
- **npc角色**：使用与主角一致的方案来绘制，步兵，骑兵，弓箭兵分别使用对应的三种武器
- **npc生成**：左侧持续刷新友军，右侧持续刷新敌军。步兵，弓箭，骑兵的比例应为4：2：1

### 武器系统
- **概述**：角色携带武器，深度应在角色之上，
- **剑**：剑的攻击呈现挥舞的感觉，要夸张，旋转伴随缩放，并且在攻击方向上有位移，攻击频率2秒一次，举起剑0.2s，加速劈下0.1s，攻击后摇0.2s，剩下的事件剑恢复到正常持剑状态等待冷却。使用拖尾表示剑的攻击特效。剑可以伤害攻击范围内的全部敌人

- **弓**：弓始终指向瞄准的目标，切换目标时快速旋转避免跳变，弓箭会发射箭矢攻击敌人

- **骑枪**：平时竖直立起，当角色速度达到最大时放平进入冲刺状态。冲刺状态在冲到人后结束进入1s冷却。或者角色速度低于80%后结束，无冷却。冲刺造成巨量伤害


增加第三种武器骑枪，平时竖直立起，当角色速度达到最大时放平进入冲刺状态，
冲刺状态在冲到人后结束进入1s冷却
或者角色速度低于80%后结束，无冷却

### 攻击判定系统
- **概述**：围绕攻击框和受击框在攻击框生命周期内的碰撞检测构建攻击判定系统，武器的攻击行为触发攻击框。攻击框携带攻击效果，攻击效果包含伤害和击退

### 输入系统
- **概述**：玩家通过虚拟摇杆控制角色移动，虚拟摇杆在点击时出现在点击位置，角色靠近敌人时自动攻击。摇杆不直接控制角色速度，而是给与加速度
- **移动**：玩家通过虚拟摇杆控制角色移动，虚拟摇杆在点击时出现在点击位置。 也可以通过键盘awsd控制角色移动

### 碰撞系统
- **概述**：角色具备圆形碰撞和质量，允许角色重叠，当角色之间碰撞重叠时，依据重叠的深度，产生反向的推挤位移

### 掉落系统
- **金币**：敌人死亡掉落金币，金币需要有一个跳出来的动画。 玩家可以拾取金币，拾取后金币飞向右上角金币计数条。

### 升级系统
- **升级**：角色初始仅拥有剑，可以通过角色升级弹窗选择增加弓箭武器还是长枪武器，两个选项均为一次性
- **升级**：金币计数条满10个和50个时触发升级。暂停游戏并触发角色升级弹窗


### 美术资源描述
- **概述**：美术资源在.res文件夹里
- **武器**：武器和箭矢的图片都是斜45度向右上的。剑的剑柄即旋转锚点在图片左下30%处。
- **角色**：马的图片仅仅是马的头部

### 分辨率
- **概述**：按照手机竖屏安排布局




## 技术栈
- HTML5 Canvas 渲染
- JavaScript 游戏逻辑
- CSS3 界面样式
- 纯前端实现，不需要服务端，打开index.html 即可运行，避免使用 ES6 模块

## 目标平台
现代浏览器（Chrome、Firefox、Edge、Safari）

请根据本文档生成AI2AI.md  描述项目架构以及规划开发任务生成


## 开发顺序
- 迭代1，实现地图，建筑和主角的渲染和控制
- 迭代2，实现武器系统，建筑刷兵
- 迭代3，完善敌人ai